{"ast":null,"code":"var _jsxFileName = \"/Users/maxjones/Flatiron/Code/Mod4/stream-app/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport MovieList from './components/MovieList';\nimport MovieListHeading from './components/MovieListHeading';\nimport SearchBox from './components/SearchBox';\nimport AddFavourites from './components/AddFavourites';\nimport RemoveFavourites from './components/RemoveFavourites';\nimport Auth from './components/Auth';\nimport UserPage from './components/UserPage';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [movies, setMovies] = useState([]);\n  const [favourites, setFavourites] = useState([]);\n  const [searchValue, setSearchValue] = useState('');\n  const [currentUser, setCurrentUser] = useState({});\n  const [dateRented, setDateRented] = useState(new Date().toLocaleString());\n  const [expiration, setExpiration] = useState(new Date().toLocaleString());\n  const [rating, setRating] = useState(0.00);\n  const [price, setPrice] = useState(5.00);\n\n  const getMovieRequest = async () => {\n    const url = `http://localhost:3000/movies`;\n    const response = await fetch(url);\n    const responseJson = await response.json();\n\n    if (responseJson) {\n      setMovies(responseJson);\n    }\n  }; // const getFavourites = async () => {\n  // \tconst url = `http://localhost:3000/users`;\n  // \tconst response = await fetch(url);\n  // \tconst responseJson = await response.json();\n  // \tif (responseJson) {\n  // \t\tsetMovies(responseJson);\n  // \t}\n  // };\n\n\n  useEffect(() => {\n    getMovieRequest();\n  }, []);\n  useEffect(() => {\n    const movieFavourites = currentUser.movies;\n\n    if (movieFavourites) {\n      setFavourites(currentUser.movies);\n      console.log(\"favorites\", favourites);\n    }\n  }, []);\n\n  const saveToLocalStorage = items => {\n    localStorage.setItem('react-movie-app-favourites', JSON.stringify(items));\n  };\n\n  const addFavouriteMovie = movie => {\n    const newFavourite = {\n      dateRented,\n      expiration,\n      price,\n      rating,\n      movie_id: movie.id,\n      user_id: currentUser.id\n    };\n    fetch(`http://localhost:3000/watchlists`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newFavourite)\n    });\n    console.log(newFavourite);\n    setFavourites(currentUser.movies); // console.log(newFavourite)\n    // const newFavouriteList = [...favourites, movie];\n    // setFavourites(newFavouriteList);\n    // saveToLocalStorage(newFavouriteList);\n  };\n\n  const removeFavouriteMovie = movie => {\n    console.log('watchlists', currentUser.watchlists);\n    if (currentUser) currentUser.watchlists.map(watchlist => {\n      if (watchlist.movie_id === movie.id) fetch(`http://localhost:3000/watchlists/${watchlist.id}`, {\n        method: \"DELETE\"\n      });\n    });\n    setFavourites(currentUser.movies);\n  }; //      if (watchlist.movie_id === movie.id) \n  //           fetch(`http://localhost:3000/watchlists/${watchlist.id}`, {\n  //       method: \"DELETE\",\n  //     });\n  //     setFavourites(currentUser.movies);\n  //   \n  //   else\n  //     console.log(\"error\")\n  // })\n  //   fetch(`http://localhost:9292/watchlists/${movie.id}`, {\n  //     method: \"DELETE\",\n  //   });\n  //   setFolders(folders.filter(({ id }) => id !== folderId));\n  // };\n  // const newFavouriteList = favourites.filter(\n  // \t(favourite) => favourite.imdbID !== movie.imdbID\n  // );\n  // setFavourites(newFavouriteList);\n  // saveToLocalStorage(newFavouriteList);\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid movie-app\",\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/auth\",\n                children: \"Login/Signup\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/movies\",\n                children: \"Movies\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/users\",\n                children: \"Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/watchlists\",\n                children: \"Watchlists\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Navbar, {\n          bg: \"dark\",\n          variant: \"dark\",\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            children: [/*#__PURE__*/_jsxDEV(Navbar.Brand, {\n              href: \"#home\",\n              children: \"Navbar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 5\n            }, this), /*#__PURE__*/_jsxDEV(Nav, {\n              className: \"me-auto\",\n              children: [/*#__PURE__*/_jsxDEV(Nav.Link, {\n                href: \"#auth\",\n                children: \"Auth\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n                href: \"#movies\",\n                children: \"Features\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 7\n              }, this), /*#__PURE__*/_jsxDEV(Nav.Link, {\n                href: \"#pricing\",\n                children: \"Pricing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 7\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 5\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/auth\",\n            children: /*#__PURE__*/_jsxDEV(Auth, {\n              setCurrentUser: setCurrentUser,\n              setFavourites: setFavourites\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/users\",\n            children: /*#__PURE__*/_jsxDEV(UserPage, {\n              currentUser: currentUser\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/movies\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row d-flex align-items-center mt-4 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(MovieListHeading, {\n                heading: \"Movies\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 5\n              }, this), /*#__PURE__*/_jsxDEV(SearchBox, {\n                searchValue: searchValue,\n                setSearchValue: setSearchValue\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 5\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(MovieList, {\n                movies: movies,\n                handleFavouritesClick: addFavouriteMovie,\n                favouriteComponent: AddFavourites\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 4\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/watchlists\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row d-flex align-items-center mt-4 mb-4\",\n              children: /*#__PURE__*/_jsxDEV(MovieListHeading, {\n                heading: \"Favourites\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 10\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: /*#__PURE__*/_jsxDEV(MovieList, {\n                movies: favourites,\n                handleFavouritesClick: removeFavouriteMovie,\n                favouriteComponent: RemoveFavourites\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 5\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 4\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 8\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 3\n  }, this);\n};\n\n_s(App, \"/e1h8+Az/tXvLeXkUXUb7TeJMDU=\");\n\n_c = App;\nexport default App; // `http://www.omdbapi.com/?s=${searchValue}&apikey=5eca1855`;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/maxjones/Flatiron/Code/Mod4/stream-app/client/src/App.js"],"names":["React","useState","useEffect","MovieList","MovieListHeading","SearchBox","AddFavourites","RemoveFavourites","Auth","UserPage","BrowserRouter","Router","Switch","Route","Link","App","movies","setMovies","favourites","setFavourites","searchValue","setSearchValue","currentUser","setCurrentUser","dateRented","setDateRented","Date","toLocaleString","expiration","setExpiration","rating","setRating","price","setPrice","getMovieRequest","url","response","fetch","responseJson","json","movieFavourites","console","log","saveToLocalStorage","items","localStorage","setItem","JSON","stringify","addFavouriteMovie","movie","newFavourite","movie_id","id","user_id","method","headers","body","removeFavouriteMovie","watchlists","map","watchlist"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport MovieList from './components/MovieList';\nimport MovieListHeading from './components/MovieListHeading';\nimport SearchBox from './components/SearchBox';\nimport AddFavourites from './components/AddFavourites';\nimport RemoveFavourites from './components/RemoveFavourites';\nimport Auth from './components/Auth';\nimport UserPage from './components/UserPage';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nconst App = () => {\n\tconst [movies, setMovies] = useState([]);\n\tconst [favourites, setFavourites] = useState([]);\n\tconst [searchValue, setSearchValue] = useState('');\n  const [currentUser, setCurrentUser] = useState({});\n  const [dateRented, setDateRented] = useState( new Date().toLocaleString());\n  const [expiration, setExpiration] = useState( new Date().toLocaleString());\n  const [rating, setRating] = useState(0.00)\n  const [price, setPrice] = useState(5.00)\n  \n\tconst getMovieRequest = async () => {\n\t\tconst url = `http://localhost:3000/movies`;\n\n\t\tconst response = await fetch(url);\n\t\tconst responseJson = await response.json();\n\n\t\tif (responseJson) {\n\t\t\tsetMovies(responseJson);\n\t\t}\n\t};\n  // const getFavourites = async () => {\n\t// \tconst url = `http://localhost:3000/users`;\n\n\t// \tconst response = await fetch(url);\n\t// \tconst responseJson = await response.json();\n\n\t// \tif (responseJson) {\n\t// \t\tsetMovies(responseJson);\n\t// \t}\n\t// };\n\n\tuseEffect(() => {\n\t\tgetMovieRequest();\n    \n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst movieFavourites = currentUser.movies;\n\n\t\tif (movieFavourites) {\n\t\t\tsetFavourites(currentUser.movies);\n      console.log(\"favorites\" , favourites)\n\t\t}\n\t}, []);\n\n\tconst saveToLocalStorage = (items) => {\n\t\tlocalStorage.setItem('react-movie-app-favourites', JSON.stringify(items));\n\t};\n\n\tconst addFavouriteMovie = (movie) => {\n   \n\n    const newFavourite = {\n        dateRented,\n        expiration,\n        price,\n        rating,\n        movie_id: movie.id,\n        user_id: currentUser.id\n    }\n    fetch(`http://localhost:3000/watchlists`, {\n        method: 'POST',\n        headers:{'Content-Type':'application/json'},\n        body:JSON.stringify(newFavourite)\n    })\n    console.log(newFavourite)\n    setFavourites(currentUser.movies)\n    \n    \n    // console.log(newFavourite)\n\t\t// const newFavouriteList = [...favourites, movie];\n\t\t// setFavourites(newFavouriteList);\n\t\t// saveToLocalStorage(newFavouriteList);\n\t};\n\n\tconst removeFavouriteMovie = (movie) => {\n\n     console.log('watchlists', currentUser.watchlists)\n     if (currentUser)\n     currentUser.watchlists.map((watchlist) => {\n       \n       if (watchlist.movie_id === movie.id) \n                 fetch(`http://localhost:3000/watchlists/${watchlist.id}`, {\n             method: \"DELETE\",\n           });\n          \n         \n         \n        \n     })\n     setFavourites(currentUser.movies);\n  };\n  //      if (watchlist.movie_id === movie.id) \n  //           fetch(`http://localhost:3000/watchlists/${watchlist.id}`, {\n  //       method: \"DELETE\",\n  //     });\n  //     setFavourites(currentUser.movies);\n  //   \n  //   else\n  //     console.log(\"error\")\n  // })\n\n\n   \n    //   fetch(`http://localhost:9292/watchlists/${movie.id}`, {\n    //     method: \"DELETE\",\n    //   });\n    //   setFolders(folders.filter(({ id }) => id !== folderId));\n    // };\n\t\t// const newFavouriteList = favourites.filter(\n\t\t// \t(favourite) => favourite.imdbID !== movie.imdbID\n\t\t// );\n\n\t\t// setFavourites(newFavouriteList);\n\t\t// saveToLocalStorage(newFavouriteList);\n\t\n\n\treturn (\n\t\t<div className='container-fluid movie-app'>\n       <Router>\n      <div>\n        <nav>\n          <ul>\n            <li>\n              <Link to=\"/auth\">Login/Signup</Link>\n            </li>\n            <li>\n              <Link to=\"/movies\">Movies</Link>\n            </li>\n            <li>\n              <Link to=\"/users\">Users</Link>\n            </li>\n            <li>\n              <Link to=\"/watchlists\">Watchlists</Link>\n            </li>\n          </ul>\n        </nav>\n        <Navbar bg=\"dark\" variant=\"dark\">\n    <Container>\n    <Navbar.Brand href=\"#home\">Navbar</Navbar.Brand>\n    <Nav className=\"me-auto\">\n      <Nav.Link href=\"#auth\">Auth</Nav.Link>\n      <Nav.Link href=\"#movies\">Features</Nav.Link>\n      <Nav.Link href=\"#pricing\">Pricing</Nav.Link>\n    </Nav>\n    </Container>\n  </Navbar>\n\n        {/* A <Switch> looks through its children <Route>s and\n            renders the first one that matches the current URL. */}\n        <Switch>\n          <Route path=\"/auth\">\n          <Auth\n       setCurrentUser={setCurrentUser} \n      setFavourites={setFavourites}\n      />\n          </Route>\n          <Route path=\"/users\">\n          <UserPage \n      currentUser={currentUser} \n      />\n          </Route>\n          <Route path=\"/movies\">\n          <div className='row d-flex align-items-center mt-4 mb-4'>\n\t\t\t\t<MovieListHeading heading='Movies' />\n\t\t\t\t<SearchBox searchValue={searchValue} setSearchValue={setSearchValue} />\n\t\t\t</div>\n      \n\t\t\t<div className='row'>\n\t\t\t\t<MovieList\n\t\t\t\t\tmovies={movies}\n\t\t\t\t\thandleFavouritesClick={addFavouriteMovie}\n\t\t\t\t\tfavouriteComponent={AddFavourites}\n\t\t\t\t/>\n\t\t\t</div>\n          </Route>\n          <Route path=\"/watchlists\">\n        \t<div className='row d-flex align-items-center mt-4 mb-4'>\n\t\t\t\t<MovieListHeading heading='Favourites' />\n\t\t\t</div>\n\t\t\t<div className='row'>\n\t\t\t\t<MovieList\n\t\t\t\t\tmovies={favourites}\n\t\t\t\t\thandleFavouritesClick={removeFavouriteMovie}\n\t\t\t\t\tfavouriteComponent={RemoveFavourites}\n\t\t\t\t/>\n\t\t\t</div>\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n      {/* <p>Current Logged in User is: {currentUser.username}</p>\n      <Auth\n       setCurrentUser={setCurrentUser} \n      setFavourites={setFavourites}\n      />\n      <UserPage \n      currentUser={currentUser} \n      />\n\t\t\t<div className='row d-flex align-items-center mt-4 mb-4'>\n\t\t\t\t<MovieListHeading heading='Movies' />\n\t\t\t\t<SearchBox searchValue={searchValue} setSearchValue={setSearchValue} />\n\t\t\t</div>\n      \n\t\t\t<div className='row'>\n\t\t\t\t<MovieList\n\t\t\t\t\tmovies={movies}\n\t\t\t\t\thandleFavouritesClick={addFavouriteMovie}\n\t\t\t\t\tfavouriteComponent={AddFavourites}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className='row d-flex align-items-center mt-4 mb-4'>\n\t\t\t\t<MovieListHeading heading='Favourites' />\n\t\t\t</div>\n\t\t\t<div className='row'>\n\t\t\t\t<MovieList\n\t\t\t\t\tmovies={favourites}\n\t\t\t\t\thandleFavouritesClick={removeFavouriteMovie}\n\t\t\t\t\tfavouriteComponent={RemoveFavourites}\n\t\t\t\t/>\n\t\t\t</div> */}\n\t\t</div>\n\t);\n};\n\nexport default App;\n\n\n// `http://www.omdbapi.com/?s=${searchValue}&apikey=5eca1855`;"]},"metadata":{},"sourceType":"module"}